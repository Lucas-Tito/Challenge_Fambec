@page "/login"
@using Challenge_Fambec.Client.Shared
@using Challenge_Fambec.Client.Services
@inject IFirebaseAuthService FirebaseAuth
@inject NavigationManager Navigation

<div class="login-page-container">
    <div style="text-align: center;">
        <h1 class="login-title">
            Simplify your management today.
        </h1>
        <p class="login-subtitle">
            Complete control in the palm of your hand, without the hassle.
        </p>
        <button @onclick="SignInWithGoogle" class="login-google-button">
            Login with Google
            <GoogleIcon Style="width: 1.5rem; height: 1.5rem; stroke: white; display: inline-block; vertical-align: middle;" />
        </button>
    </div>

    <div class="features-cards-section">
        <div class="width-limiter-container">
            <div class="feature-cards-section-text-container">
                <div style="flex: 1;">
                    <h1 class="feature-cards-section-title">
                        Everything you need to manage your products.
                    </h1>
                </div>
                <div style="flex: 1;">
                    <p class="feature-cards-section-subtitle">
                        From advanced filtering to artificial intelligence and personalization, get complete control over your management in one place.
                    </p>
                </div>
            </div>
            
            <!-- SVGs Cards -->
            <div class="cards-row">
                <div class="cards-container" @onmouseenter="() => ShowGif(0)" @onmouseleave="() => HideGif(0)">
                    <!-- Card -->
                    <div class="card-svg-container @(activeCard == 0 ? "hidden" : "")">
                        <FilterIcon Style="width: 5rem; height: 5rem; stroke: var(--color-secondary);" />
                        <h3 class="card-svg-title">
                            Filter
                        </h3>
                    </div>
                    
                    <!-- Hover Text -->
                    <div class="card-gif-container @(activeCard == 0 ? "" : "hidden")">
                        <p class="card-hover-text">
                            Quickly find what you need by applying multiple filters and viewing only the relevant products.
                        </p>
                    </div>
                </div>
                
                <div class="cards-container" @onmouseenter="() => ShowGif(1)" @onmouseleave="() => HideGif(1)">
                    <!-- Card -->
                    <div class="card-svg-container @(activeCard == 1 ? "hidden" : "")">
                        <BrainIcon Style="width: 5rem; height: 5rem; fill: var(--color-secondary);" />
                        <h3 class="card-svg-title">
                            A.I Summary
                        </h3>
                    </div>
                    
                    <!-- Hover Text -->
                    <div class="card-gif-container @(activeCard == 1 ? "" : "hidden")">
                        <p class="card-hover-text">
                            Get smart summaries that highlight key points, insights, and recommendations about your products.
                        </p>
                    </div>
                </div>

                <div class="cards-container" @onmouseenter="() => ShowGif(2)" @onmouseleave="() => HideGif(2)">
                    <!-- Card -->
                    <div class="card-svg-container @(activeCard == 2 ? "hidden" : "")">
                        <PaintBrushIcon Style="width: 5rem; height: 5rem; stroke: var(--color-secondary);" />
                        <h3 class="card-svg-title">
                            Customization
                        </h3>
                    </div>
                    
                    <!-- Hover Text -->
                    <div class="card-gif-container @(activeCard == 2 ? "" : "hidden")">
                        <p class="card-hover-text">
                            Adjust the system's appearance with light or dark themes, making it more comfortable for you to use.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    private int activeCard = -1;
    private bool isLoading = false;

    private async Task SignInWithGoogle()
    {
        if (isLoading) return;
        
        isLoading = true;
        try
        {
            var result = await FirebaseAuth.SignInWithGoogleAsync();
            if (result != null)
            {
                // Redirect to home page after successful login
                Navigation.NavigateTo("/");
            }
            else
            {
                // Handle login failure - could show error message
                Console.WriteLine("Login failed");
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Login error: {ex.Message}");
        }
        finally
        {
            isLoading = false;
        }
    }

    private void ShowGif(int cardIndex)
    {
        activeCard = cardIndex;
    }

    private void HideGif(int cardIndex)
    {
        if (activeCard == cardIndex)
        {
            activeCard = -1;
        }
    }
}